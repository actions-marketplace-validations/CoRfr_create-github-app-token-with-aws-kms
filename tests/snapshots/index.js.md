# Snapshot report for `tests/index.js`

The actual snapshot is saved in `index.js.snap`.

Generated by [AVA](https://avajs.dev).

## action-deprecated-inputs.test.js

> stderr

    ''

> stdout

    ''

## main-custom-github-api-url.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/create-github-app-token␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /api/v3/repos/actions/create-github-app-token/installation␊
    POST /api/v3/app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}`

## main-kms-app-auth.test.js

> stderr

    ''

> stdout

    '✓ KMS app authentication test passed'

## main-kms-basic.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}␊
    ✓ KMS basic authentication test passed`

## main-kms-installation-id-with-repos.test.js

> stderr

    ''

> stdout

    `No 'owner' input provided. Using default owner 'actions' to create token for the following repositories:␊
    - actions/create-github-app-token␊
    Using provided installation ID: 123456␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-app␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}␊
    ✓ KMS installation-id with repositories test passed`

## main-kms-installation-id.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    Using provided installation ID: 123456␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-app␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}␊
    ✓ KMS installation-id test passed`

## main-kms-missing-installation-id.test.js

> stderr

    ''

> stdout

    '✓ KMS missing installation ID test passed'

## main-kms-no-signature-error.test.js

> stderr

    ''

> stdout

    '✓ KMS no signature error test passed'

## main-kms-owner-set-repo-unset.test.js

> stderr

    ''

> stdout

    `Input 'repositories' is not set. Creating token for all repositories owned by monalisa.␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /users/monalisa/installation␊
    POST /app/installations/123456/access_tokens␊
    null␊
    ✓ KMS owner set, repositories unset test passed`

## main-kms-unknown-auth-type.test.js

> stderr

    ''

> stdout

    '✓ KMS unknown auth type test passed'

## main-kms-validation-both-provided.test.js

> stderr

    ''

> stdout

    '✓ KMS validation (both provided) test passed'

## main-kms-validation-missing-both.test.js

> stderr

    ''

> stdout

    '✓ KMS validation (missing both) test passed'

## main-kms-with-permissions.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"],"permissions":{"issues":"write","contents":"read"}}␊
    ✓ KMS with permissions test passed`

## main-kms-with-profile.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}␊
    ✓ KMS with AWS profile test passed`

## main-missing-owner.test.js

> stderr

    'GITHUB_REPOSITORY_OWNER missing, must be set to \'<owner>\''

> stdout

    ''

## main-missing-repository.test.js

> stderr

    'GITHUB_REPOSITORY missing, must be set to \'<owner>/<repo>\''

> stdout

    ''

## main-private-key-with-escaped-newlines.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}`

## main-repo-skew.test.js

> stderr

    `'Issued at' claim ('iat') must be an Integer representing the time that the assertion was issued.␊
    [@octokit/auth-app] GitHub API time and system time are different by 30 seconds. Retrying request with the difference accounted for.`

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/failed-repo␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/failed-repo/installation␊
    GET /repos/actions/failed-repo/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["failed-repo"]}`

## main-token-get-owner-set-fail-response.test.js

> stderr

    ''

> stdout

    `Input 'repositories' is not set. Creating token for all repositories owned by smockle.␊
    Failed to create token for "smockle" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /users/smockle/installation␊
    GET /users/smockle/installation␊
    POST /app/installations/123456/access_tokens␊
    null`

## main-token-get-owner-set-repo-fail-response.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/failed-repo␊
    Failed to create token for "failed-repo" (attempt 1): GitHub API not available␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/failed-repo/installation␊
    GET /repos/actions/failed-repo/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["failed-repo"]}`

## main-token-get-owner-set-repo-set-to-many-newline.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/create-github-app-token␊
    - actions/toolkit␊
    - actions/checkout␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token","toolkit","checkout"]}`

## main-token-get-owner-set-repo-set-to-many.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/create-github-app-token␊
    - actions/toolkit␊
    - actions/checkout␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token","toolkit","checkout"]}`

## main-token-get-owner-set-repo-set-to-one.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are set. Creating token for the following repositories:␊
          ␊
    - actions/create-github-app-token␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}`

## main-token-get-owner-set-repo-unset.test.js

> stderr

    ''

> stdout

    `Input 'repositories' is not set. Creating token for all repositories owned by actions.␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /users/actions/installation␊
    POST /app/installations/123456/access_tokens␊
    null`

## main-token-get-owner-unset-repo-set.test.js

> stderr

    ''

> stdout

    `No 'owner' input provided. Using default owner 'actions' to create token for the following repositories:␊
    - actions/create-github-app-token␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}`

## main-token-get-owner-unset-repo-unset.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"]}`

## main-token-permissions-set.test.js

> stderr

    ''

> stdout

    `Inputs 'owner' and 'repositories' are not set. Creating token for this repository (actions/create-github-app-token).␊
    ::add-mask::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ␊
    ::set-output name=installation-id::123456␊
    ␊
    ::set-output name=app-slug::github-actions␊
    ::save-state name=token::ghs_16C7e42F292c6912E7710c838347Ae178B4a␊
    ::save-state name=expiresAt::2016-07-11T22:14:10Z␊
    --- REQUESTS ---␊
    GET /repos/actions/create-github-app-token/installation␊
    POST /app/installations/123456/access_tokens␊
    {"repositories":["create-github-app-token"],"permissions":{"issues":"write","pull_requests":"read"}}`

## post-revoke-token-fail-response.test.js

> stderr

    ''

> stdout

    '::warning::Token revocation failed: '

## post-token-expired.test.js

> stderr

    ''

> stdout

    'Token expired, skipping token revocation'

## post-token-set.test.js

> stderr

    ''

> stdout

    'Token revoked'

## post-token-skipped.test.js

> stderr

    ''

> stdout

    'Token revocation was skipped'

## post-token-unset.test.js

> stderr

    ''

> stdout

    'Token is not set'
